<html>
  <head>
    <meta charset='utf-8' />
    <title>Forge | Test your Plugin</title>
    <meta content='width=device-width, initial-scale=1.0' name='viewport' />
    <style type='text/css'>
      /*<![CDATA[*/
        body {
          padding-top: 60px;
        }
      /*]]>*/
    </style>
    <script src='//cdnjs.cloudflare.com/ajax/libs/jquery/1.7.1/jquery.min.js' type='text/javascript'></script>
    <link href='/images/favicon.ico' rel='icon' />
    <link href='/stylesheets/styles.css' rel='stylesheet' type='text/css' />
    <link href='/stylesheets/bootstrap-responsive.min.css' rel='stylesheet' type='text/css' />
    <link href='/stylesheets/prettify.css' rel='stylesheet' type='text/css' />
    <!--[if lt IE 9]>
      <script src='//html5shim.googlecode.com/svn/trunk/html5.js' type='text/javascript'></script>
    <![endif]-->
    <script src='/javascripts/bootstrap.min.js' type='text/javascript'></script>
    <script src='/javascripts/bootstrap-collapse.js' type='text/javascript'></script>
    <script src='/javascripts/prettify.js' type='text/javascript'></script>
    <script src='/javascripts/videoscale.js' type='text/javascript'></script>
    <script type='text/javascript'>
      //<![CDATA[
        $(document).ready(function() {
          $("pre.prettyprint code").removeClass("prettyprint").removeClass("linenums");
          prettyPrint();
        });
      //]]>
    </script>
    <script type='text/javascript'>
      //<![CDATA[
        $(document).ready(function() {
          var pathname = window.location.pathname;
          console.log(pathname);
          $("body > .navbar a[href='" + pathname + "']").closest("li").addClass("active");
          $("body > #content ul.nav a[href='" + pathname + "#content']").closest("li").addClass("active");
        });
      //]]>
    </script>
    <script type='text/javascript'>
      //<![CDATA[
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-34467975-1']);
        _gaq.push(['_trackPageview']);
        (function() {
          var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
          ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
          var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
      //]]>
    </script>
  </head>
  <body>
    <div class='navbar navbar-fixed-top'>
      <div class='navbar-inner'>
        <div class='container'>
          <div class='github-banner hidden-phone'>
            <a href='https://github.com/forge/forge.github.com'>
              <img alt='Fork me on GitHub' src='https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png' style='position:absolute;top:0;right:0;border:0;' />
            </a>
          </div>
          <a class='btn btn-navbar' data-target='.nav-collapse' data-toggle='collapse'>
            <span class='icon-bar'></span>
            <span class='icon-bar'></span>
            <span class='icon-bar'></span>
          </a>
          <a class='brand' href='/index.html'>
            <img alt='JBoss Forge' class='forge-logo' src='/images/jbossforge_icon_256px.png' />
          </a>
          <div class='nav-collapse'>
            <ul class='nav'>
              <li>
                <a href='/index.html'>Home</a>
              </li>
              <li>
                <a href='/docs/index.html'>Documentation</a>
              </li>
              <li>
                <a href='/team.html'>Team</a>
              </li>
              <li>
                <a href='https://community.jboss.org/en/forge'>Forums</a>
              </li>
              <li>
                <a href='/plugins.html'>Plugins</a>
              </li>
              <li>
                <a href='https://issues.jboss.org/browse/FORGE' target='issue tracker'>Issue Tracker</a>
              </li>
              <li>
                <a href='https://issues.jboss.org/browse/FORGE#selectedTab=com.atlassian.jira.plugin.system.project%3Aroadmap-panel' target='roadmap'>Roadmap</a>
              </li>
              <li>
                <a href='/events.html'>Events</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class='container' id='content'>
      <div class='container'>
  <div class='row'>
    <div class='span3'>
      <ul class='nav nav-list'>
        <li class='nav-header'>Using Forge</li>
        <li>
          <a href='/docs/using/#content'>Installation</a>
        </li>
        <li>
          <a href='/docs/using/installing-new-plugins.html#content'>Installing new Plugins</a>
        </li>
        <li>
          <a href='/docs/using/basic-javaee-app.html#content'>Writing Basic Java EE App</a>
        </li>
        <li>
          <a href='/docs/using/samples.html#content'>Samples</a>
        </li>
        <li>
          <a href='/docs/using/configure-proxy.html#content'>Configure HTTP Proxy</a>
        </li>
        <li>
          <a href='/docs/using/profiling-forge.html#content'>Profiling Forge</a>
        </li>
        <li>
          <a href='/docs/using/debugging-forge.html#content'>Debugging Forge</a>
        </li>
        <li>
          <a href='/docs/using/faq.html#content'>FAQ</a>
        </li>
        <li>
          <a href='/docs/using/affiliation.html#content'>Affiliation</a>
        </li>
        <li class='nav-header'>Get involved</li>
        <li>
          <a href='/docs/get_involved/contribute.html#content'>Contribute or Get Involved</a>
        </li>
        <li>
          <a href='/docs/get_involved/release-guide.html#content'>Release Guide</a>
        </li>
        <li>
          <a href='/docs/get_involved/write-docs.html#content'>Improve our documentation</a>
        </li>
        <li class='nav-header'>Important plugins</li>
        <li>
          <a href='/docs/important_plugins/arquillian-testing.html#content'>Arquillian Testing</a>
        </li>
        <li>
          <a href='/docs/important_plugins/ui-scaffolding.html#content'>UI Scaffolding</a>
        </li>
        <li class='nav-header'>Developing plugins</li>
        <li>
          <a href='/docs/plugin_development/#content'>Developing a plugin</a>
        </li>
        <li>
          <a href='/docs/plugin_development/reference-forge-api.html#content'>Reference Forge API</a>
        </li>
        <li>
          <a href='/docs/plugin_development/implement-plugin-interface.html#content'>Implement the Plugin interface</a>
        </li>
        <li>
          <a href='/docs/plugin_development/give-your-plugin-name.html#content'>Give your Plugin a name</a>
        </li>
        <li>
          <a href='/docs/plugin_development/add-commands-to-plugin.html#content'>Add Commands to your Plugin</a>
        </li>
        <li>
          <a href='/docs/plugin_development/add-options-to-command.html#content'>Add Options to your Commands</a>
        </li>
        <li>
          <a href='/docs/plugin_development/enable-piping.html#content'>Enable Piping between Commands</a>
        </li>
        <li>
          <a href='/docs/plugin_development/facets.html#content'>Enable modular functionality with Facets</a>
        </li>
        <li>
          <a href='/docs/plugin_development/test-plugins.html#content'>Test your Plugin</a>
        </li>
        <li>
          <a href='/docs/plugin_development/reference-libraries.html#content'>Reference Libraries</a>
        </li>
        <li>
          <a href='/docs/plugin_development/make-plugin-available.html#content'>Make your Plugin available to Forge</a>
        </li>
        <li>
          <a href='/docs/plugin_development/add-plugin-cpi.html#content'>Add your Plugin to the Central Plugin Index</a>
        </li>
        <li>
          <a href='/docs/plugin_development/important-apis.html#content'>Important APIs</a>
        </li>
      </ul>
    </div>
    <div class='span9'>
      <h1>Test your Plugin</h1>
<p>When developing plugins, it is recommended to use the provide Unit and Integration Test Harness (based on <a href="http://www.jboss.org/arquillian">Arquillian</a>.) Not only do your plugin&#8217;s Unit and Integration tests ensure that your plugin will function on your computer, but because tests are run when plugins are <em>installed</em> into a Forge runtime, they also ensure that your plugin will function on your users computers.</p>
<h2>Install the Test Harness</h2>
<p>This step should already have been completed if you used the &#8216;plugins setup&#8217; command in the section titled: [Reference the Forge APIs]. If not, paste the following dependencies into your pom.xml file.</p>
<pre class="prettyprint linenums"><code class="prettyprint linenums">&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.forge&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;forge-test-harness&lt;/artifactId&gt;&#x000A;    &lt;version&gt;${forge.api.version}&lt;/version&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;&#x000A;&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.forge&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;forge-shell&lt;/artifactId&gt;&#x000A;    &lt;version&gt;${forge.api.version}&lt;/version&gt;&#x000A;    &lt;scope&gt;test&lt;/scope&gt;&#x000A;&lt;/dependency&gt;</code></pre>
<h2>Extend AbstractShellTest or SingletonAbstractShellTest</h2>
<p>AbstractShellTest boots the Shell for each individual test method, while SingletonAbsractShellTest boots the Shell only once per test class, where each method operates on the same instance.</p>
<pre class="prettyprint linenums"><code class="prettyprint linenums">package com.example.plugin;</code>&#x000A;&#x000A;<code class="prettyprint linenums">import javax.inject.Inject;</code>&#x000A;&#x000A;<code class="prettyprint linenums">import org.jboss.arquillian.container.test.api.Deployment;&#x000A;import org.jboss.forge.project.Project;&#x000A;import org.jboss.forge.project.dependencies.DependencyResolver;&#x000A;import org.jboss.forge.test.AbstractShellTest;&#x000A;import org.jboss.shrinkwrap.api.spec.JavaArchive;&#x000A;import org.junit.Assert;&#x000A;import org.junit.Test;</code>&#x000A;&#x000A;<code class="prettyprint linenums">public class ExamplePluginTest extends AbstractShellTest&#x000A;{&#x000A;   // Notice that you may use injection to do verification of the internal state of the system.&#x000A;   // Or to perform additional operations.&#x000A;   @Inject&#x000A;   private DependencyResolver resolver;</code>&#x000A;&#x000A;<code class="prettyprint linenums">   @Deployment&#x000A;   public static JavaArchive getDeployment()&#x000A;   {&#x000A;      // The deployment method is where you must add references to your classes, packages, and&#x000A;      // configuration files, via  Arquillian.&#x000A;      return AbstractShellTest.getDeployment().addPackages(true, ExamplePlugin.class.getPackage());&#x000A;   }</code>&#x000A;&#x000A;<code class="prettyprint linenums">   @Test&#x000A;   public void testInstallPrettyfaces() throws Exception&#x000A;   {&#x000A;      // Create a new barebones Java project&#x000A;      Project p = initializeJavaProject();</code>&#x000A;&#x000A;<code class="prettyprint linenums">      // Queue input lines to be read as the Shell executes.&#x000A;      queueInputLines("y");</code>&#x000A;&#x000A;<code class="prettyprint linenums">      // Execute a command. If any input is required, it will be read from queued input.&#x000A;      getShell().execute("echo hi there");</code>&#x000A;&#x000A;<code class="prettyprint linenums">      Assert.assertNotNull(resolver);&#x000A;   }&#x000A;}</code></pre>
<h2>Run your Build</h2>
<p>If done properly, you should now see your test execute during the Plugin build lifecycle.</p>
<pre class="command"><code class="command">$ build</code></pre>
<h2>Write more tests</h2>
<p>The more tests, the merrier! Tests make happy code.</p>
    </div>
  </div>
</div>
      <hr />
      <footer>
        <p>&copy; JBoss 2013</p>
      </footer>
    </div>
  </body>
</html>
